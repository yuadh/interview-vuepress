---
title: React入门
date: 2022-11-29 15:50:03
permalink: /pages/9b7e40/
tags:
  - 
author: 
  name: yuadh
  link: https://github.com/yuadh
---
## React

## 虚拟DOM和Diff算法

虚拟DOM

**问题描述**：假设我们的数据发生一点点的变化，也会被强制重建整顿DOM树，这么做，会涉及到很多元素的重绘和重排，导致性能浪费严重

**解决上述问题思路**：实现按需更行页面上的元素即可。也就是说，把需要修改的元素，所对应的 DOM 元素重新构建；其它没有变化的数据，所对应的 DOM 节点不需要被强制更新

**具体实现方案**：只需要拿到页面更新前的 内存中的DOM树，同时再拿到页面更新前新渲染出来的内存DOM树；然后，对比这两颗新旧DOM树，找到那些需要被重新创建和修改的元素即可。这样就能实现DOM的按需更新

**如何拿到这两颗DOM树**： 如果要拿到浏览器私有的DOM树，那我们必须调用浏览器提供的相关JS的API才行。但是浏览器没有提供相关的API，那我们可以自己模拟这两颗新旧DOM树

**如何自己模拟这两颗新旧DOM树**： 这里涉及到手动模拟DOM树的原理：使用JS创建一个对象，用和这个对象来模拟每一个DOM节点；然后在每个DOM节点中，有提供了类似于children这样的属性来描述当前子节点。这样的话，当DOM节点形成了嵌套关系，就模拟出了一颗DOM树

**`总结`**

- 虚拟DOM的**本质**：使用 JS 对象模拟DOM树。
- 虚拟DOM的**目的**：为了实现 DOM 节点的高效更新。



diff算法

怎么实现 两颗新旧DOM树的对比呢，这里就涉及到diff算法

`tree diff` ： 新旧DOM树，逐层对比的方式，就叫做 `tree diff`。每当我们从前到后，把所有层的节点对比完后，必须能够找到哪些需要被更新的元素

`component diff` ：在对比每一层的时候，组件之间的对比，叫做 `component diff` 。当对比组件的时候，如果两个组件的类型相同，则暂时认为这个组件不需要被更新，如果组件的类型不同，则立即将旧组件移除，新建一个组件，替换被移除的位置

`element diff` ： 在组件中，每个元素之间也要进行对比，那么，元素级别的对比，叫做 element diff

`key` ： `key` 这个属性，可以把页面上的DOM节点和虚拟DOM中的对象，做一层关联关系











**声明式编程**

声明式编程是目前整个大前端开发的模式：Vue、React、Flutter、SwitfUI

它允许我们 **只需要维护自己的状态，当状态改变时，react 可以根据最新的状态去渲染我们的UI界面**

**组件化开发**

组件化开发页面目前前端的流行趋势，我们会将复杂的界面拆分成一个个小的组件

如何合理的进行组件的划分和设计

## react开发依赖

- react
- react-dom
- babel

React18 之前渲染用法

`ReactDOM.render(<h2></h2>,document.querey)`































