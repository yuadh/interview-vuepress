## å‰è¨€ï¼šå¦‚ä½•å†™å¥½JS

- HTMLã€CSSã€JavaScript èŒèƒ½åˆ†ç¦»
- ç»„ä»¶å°è£…
- åº”ç”¨å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³

## èŒèƒ½åˆ†ç¦»

åœ¨ä½¿ç”¨ `js` ç¼–å†™ä»£ç æ—¶ï¼Œè¦æ³¨æ„ `js` æœ€å¥½åªè´Ÿè´£ç½‘é¡µçš„è¡Œä¸ºã€‚ä»¥ä¸‹ä¾‹å­è¯´æ˜

```js
const btn = document.getElementById('modeBtn')
btn.addEventListener('click',(e)=>{
  if(e.target.innerHTML === 'ğŸŒ'){
    body.style.backgroundColor = 'black';
    body.style.color = 'white';
    body.style.innerHTML = 'ğŸŒ›';
  }else{
    body.style.backgroundColor = 'white';
    body.style.color = 'black';
    body.style.innerHTML = 'ğŸŒ';
  }
})
```

è¿™ç§å†™æ³•åœ¨JSä¸­ç›´æ¥æ“ä½œäº†CSSæ ·å¼ï¼Œä¸å¤Ÿè§„èŒƒæˆ–è€…è¯´æ²¡æœ‰ä½“ç°å‡ºèŒèƒ½åˆ†ç¦»çš„ä½œç”¨ï¼ˆç”¨JSå®Œæˆäº†CSSçš„å·¥ä½œï¼‰ï¼Œå¯¹æ­¤è¿›è¡Œæ”¹è¿›çš„å†™æ³•

```js
const btn = document.getElementById('modeBtn')
btn.addEventListener('click',(e)=>{
  const body = document.body
  if(body.clasName !== 'night'){
    body.className = 'night';
  }else{
    body.className = '';
  }
})
```

è¿™ç§å†™æ³•è™½ç„¶æ²¡æœ‰ç›´æ¥æ“ä½œcssæ ·å¼ï¼Œä½†æ˜¯è¿˜ä¸å¤Ÿå®Œç¾çš„å„å¸å…¶èŒã€‚å¯¹äºè¿™ç§çº¯å±•ç¤ºçš„äº¤äº’ï¼Œå¯ä»¥ä½¿ç”¨çº¯ CSSæä¾›çš„åŠŸèƒ½æ¥å®Œæˆ

å‚è€ƒï¼š[é’è®­è¥-æ·±å¤œé£Ÿå ‚-3 - ç ä¸Šæ˜é‡‘ (juejin.cn)](https://code.juejin.cn/pen/7108184672710066212)

ç»“è®ºï¼š

1. HTML/CSS/JS å„å¸å…¶èŒ
2. åº”å½“é¿å…ä¸å¿…è¦çš„ç”±JSç›´æ¥æ“ä½œæ ·å¼
3. å¯ä»¥ç”¨ class æ¥è¡¨ç¤ºçŠ¶æ€
4. çº¯å±•ç¤ºç±»äº¤äº’å¯»æ±‚é›¶ js æ–¹æ¡ˆ

## JSç»„ä»¶å°è£…

ç»„ä»¶æ˜¯æŒ‡webé¡µé¢ä¸ŠæŠ½å–å‡ºæ¥ä¸€ä¸ªä¸ªåŒ…å«æ¨¡æ¿ï¼ˆHTMLï¼‰ã€åŠŸèƒ½ï¼ˆJSï¼‰å’Œæ ·å¼çš„ï¼ˆCSSï¼‰çš„å•å…ƒã€‚å¥½çš„æ¨¡æ¿å…·æœ‰ï¼š`æ­£ç¡®æ€§`ã€`æ‰©å±•æ€§`ã€`å¤ç”¨æ€§`

éœ€æ±‚ï¼šä½¿ç”¨JSå°è£…ä¸€ä¸ªè½®æ’­å›¾

### ç»“æ„è®¾è®¡

html

```html
<div id="my-slider" class="slider-list">
  <ul>
    <li class="slider-list__item--selected">
      <img src="https://p5.ssl.qhimg.com/t0119c74624763dd070.png"/>
    </li>
    <li class="slider-list__item">
      <img src="https://p4.ssl.qhimg.com/t01adbe3351db853eb3.jpg"/>
    </li>
    <li class="slider-list__item">
      <img src="https://p2.ssl.qhimg.com/t01645cd5ba0c3b60cb.jpg"/>
    </li>
    <li class="slider-list__item">
      <img src="https://p4.ssl.qhimg.com/t01331ac159b58f5478.jpg"/>
    </li>
  </ul>
</div>
```

css

```css
#my-slider{
  position: relative;
  width:790px;
}
.slider-list ul{
  list-style-type:none;
  postion: relative;
  padding: 0;
  margin: 0;
}
.slider-list_item,
.slider-list_item--selected{
  postion: absolute;
  transition: opacity 1s;
  opacity: 0;
  text-aligen: center;
}
.slider-list_item--selected{
  transition: opacity 1s;
  opacity: 1;
}
```

ç»å…¸æ•™å­¦è½®æ’­å›¾çš„ç»“æ„è®¾è®¡

```js
class Slider{
  constructor(id){//æ„é€ å‡½æ•°
    this.container =doucment.getElementById(id);
    this.items = this.container.querySelectorAll('.slider-list_item, .slider-list_item--selected');
  }
  getSelectedItem(){//è·å–é€‰ä¸­list
    const selected = this.container.querySelector('.slider-list_item--selected');
    return selected;
  }
  getSelectedItemIndex(){//è·å–é€‰ä¸­listçš„index
    return Array.from(this.items).indexOf(this.getGetSelectedItem());
  }
  slideTo(idx){
    const selected = this.getSelectedItem();
    if(selected){
      selected.className = 'slider-list_item';
    }
    const item = this.item[idx];
    if(item){
      item.className = 'slider-list_item--selected';
    }
  }
  slideNext(){
    const currentIdx = this.getSelectedItemIndex();
    const nextIdx = (currentIdx+1) % this.items.length;
    this.slideTo(nextIdx);
  }
  slidePrevious(){
   	const currentIdx = this.getSelectedItemIndex();
    const previousIdx = (this.items.length+currentIdx-1) % this.items.length;
    this.slideTo(nextIdx); 
  }
}
```

[é’è®­è¥-è½®æ’­å›¾-1 - ç ä¸Šæ˜é‡‘ (juejin.cn)](https://code.juejin.cn/pen/7108186682775568420)

### åŠ ä¸ŠJSè¡Œä¸º

åŠ ä¸Šæ§ä»¶

html

```html
<a class="slide-list__next"></a>
<a class="slide-list__previous"></a>
<div class="slide-list__control">
  <span class="slide-list__control-buttons--selected"></span>
  <span class="slide-list__control-buttons"></span>
  <span class="slide-list__control-buttons"></span>
  <span class="slide-list__control-buttons"></span>
</div>
```

css

```css
.slider-list_control {
  position: realative;
  display: table;
  background-color: rgba(255,255,255,0.5);
  padding: 5px;
  border-radius: 12px;
  bottom: 30px;
  margin: auto;
}
.slide-list__next,
.slide-list__previous{
  display: inline-block;
  position: absolute;
  top: 50%;
  margin-top: -25px;
  width: 30px;
  height: 50px;
  font-size: 24px;
  text-align: center;
  line-height: 50px;
  overflow: hidden;
  border: none;
  background: transparent;
  color: white;
  background: rgba(0,0,0,0.2);
  cursor: pointer;
  opacity: 0;
  transition: opacity 0.5s;
}
.slide-list__previous {
  left: 0;
}
.slide-list__next{
  right: 0;
}
#my-slider:hover .slide-list__previous,
#my-slider:hover .slide-list__next {
  opacity: 1;
}

.slide-list__previous:after {
  content: '<';
}

.slide-list__next:after {
  content: '>';
}
.slide-list__control-buttons,
.slide-list__control-buttons--selected{
  display: inline-block;
  width: 15px;
  height: 15px;
  border-radius: 50%;
  margin: 0 5px;
  background-color: white;
  cursor: pointer;
}
.slide-list__control-buttons--selected {
  background-color: red;
}
```

ä¿®æ”¹åŸæœ‰js

```js
constructor(id,cycle=3000){
  this.container = document.getElementById(id);
  this.items = this.container.querySelectorAll('.slider-list__item, .slider-list__item--selected');
  this.cycle = cycle;
  const controller = this.container.querySelector('.slide-list__control');
  if(controller){
     const buttons = controller.querySelectorAll('.slide-list__control-buttons,.slide-list__control-buttons--selected');
     controller.addEventListener = ('mouseover',e=>{
       const idx = Array.from(buttons).indexOf(e.target);
       if(idx>=0){
          this.slideTo(idx);
         	this.stop();//æš‚åœå®šæ—¶å™¨ï¼Œé˜²æ­¢æ•ˆæœå†²çª
       }
     });
    controller.addEventListener('mouseout',e=>{
      this.start();
    })
    //è¿™ä¸ªæ–¹æ³•ä¼šæ›´æ–° buttons çš„é€‰ä¸­
    this.container.addEventListener('slide', evt => {
        const idx = evt.detail.index
        const selected = controller.querySelector('.slide-list__control-buttons--selected');
        if(selected) selected.className = 'slide-list__control-buttons';
        buttons[idx].className = 'slide-list__control-buttons--selected';
      })
  }
  const previous = this.container.querySelector('.slide-list-previous');
  if(previous){
     previous.addEventListener('click',e=>{
       this.stop();
       this.sliderPrevious();
       this.start();
       e.preventDefault();
     })
  }
  const next = this.container.querySelector('.slide-list-next');
  if(next){
     next.addEventListener('click',e=>{
       this.stop();
       this.slideNext();
       this.start();
       e.preventDefault();
     })
  }
  slideTo(idx){
    let selected = this.getSelectedItem();
    if(selected){
       selected.className = 'slider-list__item';
    }
    let item = this.items[idx];
    if(item){
      item.className = 'slider-list__item--selected';
    }
    const detail = {index:idx}
    //æ¥å£è¡¨ç¤ºç”±ç¨‹åºå‡ºäºæŸä¸ªç›®çš„è€Œåˆ›å»ºçš„äº‹ä»¶
    const event = new CustomEvent('slide',				{bubbles:true,detail})
    //ä¼šå‘ä¸€ä¸ªæŒ‡å®šçš„äº‹ä»¶ç›®æ ‡æ´¾å‘ä¸€ä¸ª Event äº‹ä»¶
    this.container.dispatchEvent(event)
  }
  start(){
    this.stop();
    this._timer = setInterval(()=>this.slideNext(), this.cycle);
  }
  stop(){
    clearInterval(this._timer);
  }
}
const slider = new Slider('my-slider');
slider.start();
```

è‡³æ­¤ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„è½®æ’­å›¾å°±åšå‡ºæ¥äº†

[é’è®­è¥-è½®æ’­å›¾-2 - ç ä¸Šæ˜é‡‘ (juejin.cn)](https://code.juejin.cn/pen/7108187834598555656)

æ­¤æ—¶çš„è½®æ’­å›¾è™½ç„¶åŠŸèƒ½å®Œæ•´ã€ä½†æ˜¯æœ‰è®¸å¤šå¯ä»¥æ”¹è¿›çš„åœ°æ–¹ã€‚ã€‚æ¯”å¦‚å½“æˆ‘ä»¬æƒ³è¦åˆ é™¤éƒ¨åˆ†æ¨¡å—æ—¶ï¼Œå¦‚åˆ é™¤ buttons-list è¿™ä¸ªè½®æ’­å°æ§ä»¶ã€æˆ–è€… nextã€previous æŒ‰é’®æ—¶ã€‚ã€‚å°±éœ€è¦é‡æ–°ä¿®æ”¹ã€åˆ é™¤ä»£ç 

è§£å†³ä¼˜åŒ–æ–¹æ³•ï¼šæŠŠæ¨¡å—åšæˆæ’ä»¶

å¦‚ä¸‹æ‰€ç¤º

### é‡æ„-æ’ä»¶åŒ–

- å°†æ§åˆ¶å…ƒç´ åšæŠ½å–æˆæ’ä»¶
- æ’ä»¶ä¸ç»„ä»¶ä¹‹é—´é€šè¿‡ `ä¾èµ–æ³¨å…¥` æ–¹å¼å»ºç«‹è”ç³»

å¯¹ js ä»£ç è¿›è¡Œæ”¹è¿›

```js
class Slider {
  constructor(id,cycle=3000){
    this.container = document.getElementById(id);
    this.items = this.container.querySelectorAll('slider-list__item, .slider-list__item--selected')
    this.cycle = cycle;
  }
  // æ·»åŠ æ’ä»¶æ³¨å†Œå™¨
  registerPlugins(...plugins){
    plugins.forEach(plugin = >plugin(this))
  }
}
 // ç¼–å†™æ’ä»¶åŠŸèƒ½
function pluginController(slider){
  const controller = slider.container.querySelector('.slide-list__control')
  if(controller){
     controller.addEventListener('mouseover', evt=>{
      const idx = Array.from(buttons).indexOf(evt.target);
      if(idx >= 0){
        slider.slideTo(idx);
        slider.stop();
      }
    });

    controller.addEventListener('mouseout', evt=>{
      slider.start();
    });

    slider.addEventListener('slide', evt => {
      const idx = evt.detail.index
      const selected = controller.querySelector('.slide-list__control-buttons--selected');
      if(selected) selected.className = 'slide-list__control-buttons';
      buttons[idx].className = 'slide-list__control-buttons--selected';
    });
     }
  function pluginPrevious(slider){
  const previous = slider.container.querySelector('.slide-list__previous');
  if(previous){
    previous.addEventListener('click', evt => {
      slider.stop();
      slider.slidePrevious();
      slider.start();
      evt.preventDefault();
    });
  }  
}

function pluginNext(slider){
  const next = slider.container.querySelector('.slide-list__next');
  if(next){
    next.addEventListener('click', evt => {
      slider.stop();
      slider.slideNext();
      slider.start();
      evt.preventDefault();
    });
  }  
}
}
const slider = new Slider('my-slider');
slider.registerPlugins(pluginController, pluginPrevious, pluginNext);
slider.start();
```

è¿™æ ·å°±å¯ä»¥å¢åˆ ä¸éœ€è¦çš„åŠŸèƒ½äº†ï¼Œ[é’è®­è¥-è½®æ’­å›¾-3 - ç ä¸Šæ˜é‡‘ (juejin.cn)](https://code.juejin.cn/pen/7108191112094973989)

ä½†æ˜¯è¿˜æœ‰ä¸ªé—®é¢˜â€”â€”æ ·å¼ä»ç„¶å­˜åœ¨ï¼Œäºæ˜¯æœ‰äº†æ›´åŠ ä¼˜åŒ–çš„ç‰ˆæœ¬â€”â€”æ¨¡æ¿åŒ–ï¼Œå¦‚ä¸‹

### é‡æ„-æ¨¡æ¿åŒ–

å°†HTMLæ¨¡æ¿åŒ–ï¼Œæ›´æ˜“äºæ‰©å±•

æ”¹é€   HTML å’Œ JS

ç•™ä¸€ä¸ªdivï¼Œä½œä¸ºè½®æ’­å›¾çš„äººæŸ±åŠ›

```html
<div id="my-slider" class="slider-list"></div>
```

js

```js
class Slider{
  contructor(id,opts = {images:[],cycle:3000}){
    this.container = document.getElementById(id);
    this.options = opts;
    this.container.innerHTML = this.render();
    this.items = this.container.querySelectorAll('.slider-list__item, .slider-list__item--selected');
    this.cycle = opts.cycle || 3000;
    this.slideTo(0);
  }
  render(){
    const images  = this.options.images;
    const content = images.map(image=>`
			<li class="slider-list__item">
				<img src="${image}"/>
			</li>
		`.trim())
    return `<ul>${content.join('')}</ul>`
  }
  registerPlugins(...plugins){
    plugins.forEach(plugin=>{
      const pluginContainer = document.createElement('div');
      pluginContainer.className = '.slider-list__plugin';
      pluginContainer.innerHTML = plugin.render(this.options.images);
      this.container.appendChild(pluginContainer)
      plugin.action(this)
    })
  }
   getSelectedItem(){
    const selected = this.container.querySelector('.slider-list__item--selected');
    return selected
  }
  getSelectedItemIndex(){
    return Array.from(this.items).indexOf(this.getSelectedItem());
  }
  slideTo(idx){
    const selected = this.getSelectedItem();
    if(selected){ 
      selected.className = 'slider-list__item';
    }
    let item = this.items[idx];
    if(item){
      item.className = 'slider-list__item--selected';
    }
    
    const detail = {index: idx}
    const event = new CustomEvent('slide', {bubbles:true, detail})
    this.container.dispatchEvent(event)
  }
  slideNext(){
    const currentIdx = this.getSelectedItemIndex();
    const nextIdx = (currentIdx + 1) % this.items.length;
    this.slideTo(nextIdx);
  }
  slidePrevious(){
    const currentIdx = this.getSelectedItemIndex();
    const previousIdx = (this.items.length + currentIdx - 1) % this.items.length;
    this.slideTo(previousIdx);  
  }
  addEventListener(type, handler){
    this.container.addEventListener(type, handler);
  }
  start(){
    this.stop();
    this._timer = setInterval(()=>this.slideNext(), this.cycle);
  }
  stop(){
    clearInterval(this._timer);
  }
}
const pluginController = {
  render(images){
    return `
			<div class="slide-list__control">
				${images.map(image,i)=>`
					<span class="slide-list__control-buttons${i===0?'--selected':''}"></span>).join('')}
			</div>
		`.trim();
  }
  action(){
    const controller = slider.container.querySelector('.slide-list__control');
    
    if(controller){
      const buttons = controller.querySelectorAll('.slide-list__control-buttons, .slide-list__control-buttons--selected');
      controller.addEventListener('mouseover', evt => {
        const idx = Array.from(buttons).indexOf(evt.target);
        if(idx >= 0){
          slider.slideTo(idx);
          slider.stop();
        }
      });

      controller.addEventListener('mouseout', evt => {
        slider.start();
      });

      slider.addEventListener('slide', evt => {
        const idx = evt.detail.index
        const selected = controller.querySelector('.slide-list__control-buttons--selected');
        if(selected) selected.className = 'slide-list__control-buttons';
        buttons[idx].className = 'slide-list__control-buttons--selected';
      });
    }    
  }
}
const pluginPrevious = {
  render(){
    return `<a class="slide-list__previous"></a>`;
  },
  action(slider){
    const previous = slider.container.querySelector('.slide-list__previous');
    if(previous){
      previous.addEventListener('click', evt => {
        slider.stop();
        slider.slidePrevious();
        slider.start();
        evt.preventDefault();
      });
    }  
  }
};

const pluginNext = {
  render(){
    return `<a class="slide-list__next"></a>`;
  },
  action(slider){
    const previous = slider.container.querySelector('.slide-list__next');
    if(previous){
      previous.addEventListener('click', evt => {
        slider.stop();
        slider.slideNext();
        slider.start();
        evt.preventDefault();
      });
    }  
  }
};
const slider = new Slider('my-slider', {images: ['https://p5.ssl.qhimg.com/t0119c74624763dd070.png',
     'https://p4.ssl.qhimg.com/t01adbe3351db853eb3.jpg',
     'https://p2.ssl.qhimg.com/t01645cd5ba0c3b60cb.jpg',
     'https://p4.ssl.qhimg.com/t01331ac159b58f5478.jpg'], cycle:3000});

slider.registerPlugins(pluginController, pluginPrevious, pluginNext);
slider.start();
```

è¿™æ ·HTMLä¹ŸæŠ½è±¡æˆäº†æ¨¡æ¿ï¼ŒåŠŸèƒ½åˆ é™¤åã€‚æ’ä»¶çš„æ¨¡æ¿ä¹Ÿä¸€åŒåˆ é™¤äº†

[é’è®­è¥-è½®æ’­å›¾-4 - ç ä¸Šæ˜é‡‘ (juejin.cn)](https://code.juejin.cn/pen/7108191503301754910)

å¤§ä½¬è§£å†³ä»ç„¶ä¸å¤Ÿå®Œç¾ï¼Œäºæ˜¯åˆæœ‰äº†æŠ½è±¡åŒ–

### é‡æ„-æŠ½è±¡åŒ–

å°†ç»„ä»¶çš„é€šç”¨æ¨¡å‹æŠ½å–å‡ºæ¥

```js
class Component {
  constructor(id,opts={name,data:[]){
    this.container = document.getEelmentById(id);
  	registerPlugins(...plugins){
      plugins.forEach(plugin=>{
        const pluginContainer = document.createElement('div')
        pluginContainer.className = `.${name}__plugin`;
      pluginContainer.innerHTML = plugin.render(this.options.data);
      this.container.appendChild(pluginContainer);
      plugin.action(this)
      })
    }
  }
	render(data) {
    /* abstract */
    return ''
  }
}
class Slider extends Component{
  constructor(id,opts = {name:'slider-list',data:[],cycle:3000})
  super(id,opts)
  this.items = this.container.querySelectorAll('.slider-list__item, .slider-list__item--selected');
    this.cycle = opts.cycle || 3000;
    this.slideTo(0);
}
```

[é’è®­è¥-è½®æ’­å›¾-final - ç ä¸Šæ˜é‡‘ (juejin.cn)](https://code.juejin.cn/pen/7108185460320501774)

ç»“ç®—å¦‚æ­¤ï¼Œå¤§ä½¬è§£å†³ä»£ç ä¾æ—§ä¸å¤Ÿå®Œç¾ï¼Œæ¯”å¦‚çˆ¶å­èŠ‚ç‚¹çš„è°ƒç”¨å¤„ç†é—®é¢˜ã€jsä¸­ä¾é å¤§é‡çš„cssç±»åå±æ€§ç­‰é—®é¢˜æ˜¯å¦æœ‰ä¼˜åŒ–ç©ºé—´ã€‚























