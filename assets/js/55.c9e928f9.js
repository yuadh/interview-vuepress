(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{389:function(v,_,a){"use strict";a.r(_);var t=a(4),s=Object(t.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"优化指标"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#优化指标"}},[v._v("#")]),v._v(" 优化指标")]),v._v(" "),_("p",[_("a",{attrs:{href:"https://juejin.cn/post/6981673766178783262",target:"_blank",rel:"noopener noreferrer"}},[v._v("写给中高级前端关于性能优化的9大策略和6大指标 | 网易四年实践"),_("OutboundLink")],1)]),v._v(" "),_("p",[v._v("让用户感觉这个网站很「快」 ， 一种是「真的快」一种是「觉得快」")]),v._v(" "),_("ul",[_("li",[_("p",[v._v("「真的快」 可 客观衡量的指标， 网页访问时间、交互响应时间、跳转页面时间")])]),v._v(" "),_("li",[_("p",[v._v("「觉得快」 用户主观感知的性能，通过视觉引导等手段转移用户对等待时间的关注")])]),v._v(" "),_("li",[_("p",[v._v("动画流畅")])]),v._v(" "),_("li",[_("p",[v._v("表单提交速度")])]),v._v(" "),_("li",[_("p",[v._v("列表滚动页面切换是否卡顿")])]),v._v(" "),_("li",[_("p",[_("strong",[v._v("响应速度")]),v._v("：页面初始访问速度 + 交互响应速度")])]),v._v(" "),_("li",[_("p",[_("strong",[v._v("页面稳定性")]),v._v("：页面出错率，资源加载错误，JS 执行报错")])]),v._v(" "),_("li",[_("p",[_("strong",[v._v("外部服务调用")]),v._v("：网络请求访问速度")])])]),v._v(" "),_("p",[v._v("最好的性能指标："),_("code",[v._v("100ms 内响应用户输入；动画/滚动在 10ms 内下一帧；最大化空闲时间；页面加载时长不超过 5 秒")])]),v._v(" "),_("p",[v._v("系统架构、性能分析、网站优化、网站监控")]),v._v(" "),_("blockquote",[_("h3",{attrs:{id:"权衡"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#权衡"}},[v._v("#")]),v._v(" 权衡")])]),v._v(" "),_("p",[v._v("一种优化方案可能适用于大多数项目，但是特殊情况下可能会起反效果")]),v._v(" "),_("p",[v._v("浏览器有单域名下并发请求限制，通常我们将依赖统一打包减少首屏请求数，依赖不变动文件指纹不变，利用缓存。依赖不多这么处理有助于提升加载速度，一旦依赖多起来，包就会特别 大， 弱网条件  严重拖慢页面显示")]),v._v(" "),_("p",[v._v("所以 根据情况 对vendor拆分， 如拆分到CDN，或者直接拆分到页面")]),v._v(" "),_("p",[v._v("因此， 在 性能优化过程中，必须根据最终能给"),_("strong",[v._v("用户体验带来的提升")]),v._v("权衡后做出适合 的选择")]),v._v(" "),_("h1",{attrs:{id:"优化手法"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#优化手法"}},[v._v("#")]),v._v(" 优化手法")]),v._v(" "),_("ul",[_("li",[v._v("聚焦用户")]),v._v(" "),_("li",[v._v("尽快响应用户输入")]),v._v(" "),_("li",[v._v("动画执行流畅")]),v._v(" "),_("li",[v._v("最大化主线程空闲时间")]),v._v(" "),_("li",[v._v("网页可交互性")])]),v._v(" "),_("h1",{attrs:{id:"html"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#html"}},[v._v("#")]),v._v(" HTML")]),v._v(" "),_("ul",[_("li",[v._v("避免HTML中直接写CSS")]),v._v(" "),_("li",[v._v("viewport加速页面渲染")]),v._v(" "),_("li",[v._v("使用语义化标签")]),v._v(" "),_("li",[v._v("减少标签的使用，DOM解析是一个大量遍历的过程")]),v._v(" "),_("li",[v._v("避免src和href空值")]),v._v(" "),_("li",[v._v("减少DNS查询数")])]),v._v(" "),_("h1",{attrs:{id:"css"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#css"}},[v._v("#")]),v._v(" CSS")]),v._v(" "),_("ul",[_("li",[_("p",[v._v("避免后代选择符")])]),v._v(" "),_("li",[_("p",[v._v("避免链式~")])]),v._v(" "),_("li",[_("p",[v._v("避免!important")])]),v._v(" "),_("li",[_("p",[v._v("link代替@import")])])]),v._v(" "),_("blockquote",[_("p",[v._v("@import会将请求变得 串行化，导致加载增加延迟")])]),v._v(" "),_("ul",[_("li",[v._v("减少回流与重绘")]),v._v(" "),_("li",[v._v("CSS 放在 "),_("code",[v._v("head")]),v._v(" 中")]),v._v(" "),_("li",[v._v("压缩CSS 开启gzip压缩")]),v._v(" "),_("li",[v._v("骨架屏+合理的loading")]),v._v(" "),_("li",[v._v("优化选择器路径，避免 过多嵌套")]),v._v(" "),_("li",[v._v("选择器合并：压缩空间和资源开销")]),v._v(" "),_("li",[v._v("精确样式")])]),v._v(" "),_("blockquote",[_("p",[v._v("比如设置{padding-left:10px}的值，避免{padding:0 0 0 10px}这样的写法")])]),v._v(" "),_("ul",[_("li",[v._v("异步加载CSS")]),v._v(" "),_("li",[v._v("避免通配符")])]),v._v(" "),_("blockquote",[_("p",[v._v(".a .b *{} 像这样的选择器，从右到左解析，在解析过程中遇到通配符（**）会去遍历整个dom")])]),v._v(" "),_("ul",[_("li",[v._v("少用float：渲染时计算量大")]),v._v(" "),_("li",[v._v("0值不加单位：兼容性")]),v._v(" "),_("li",[v._v("避免使用 昂贵 的属性")])]),v._v(" "),_("blockquote",[_("p",[v._v("因为他们渲染成本挺高，渲染速度慢一些")]),v._v(" "),_("ul",[_("li",[v._v("border-radius")]),v._v(" "),_("li",[v._v("box-shadow")]),v._v(" "),_("li",[v._v("opacity")]),v._v(" "),_("li",[v._v("transform")]),v._v(" "),_("li",[v._v("filter")]),v._v(" "),_("li",[v._v("position: fixed")])])]),v._v(" "),_("ul",[_("li",[v._v("使用先进布局方式——flex")])]),v._v(" "),_("h2",{attrs:{id:"会造成阻塞吗"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#会造成阻塞吗"}},[v._v("#")]),v._v(" 会造成阻塞吗")]),v._v(" "),_("ul",[_("li",[v._v("CSS加载不会阻塞DOM树解析")]),v._v(" "),_("li",[v._v("CSS加载会阻塞DOM树渲染")]),v._v(" "),_("li",[v._v("CSS加载会阻塞后面JS执行")])]),v._v(" "),_("h1",{attrs:{id:"js"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#js"}},[v._v("#")]),v._v(" JS")]),v._v(" "),_("ul",[_("li",[v._v("避免循环操作DOM")]),v._v(" "),_("li",[v._v("事件委托")])]),v._v(" "),_("blockquote",[_("p",[v._v("绑定事件时，不绑定到目标元素上，而是绑定到其祖先元素上")]),v._v(" "),_("ul",[_("li",[v._v("监听事件少")]),v._v(" "),_("li",[v._v("新增节点时，无需增加事件绑定")])])]),v._v(" "),_("ul",[_("li",[v._v("scrip标签放在body后")])]),v._v(" "),_("blockquote",[_("p",[v._v("CSS放在"),_("code",[v._v("head")])]),v._v(" "),_("p",[v._v("因为JS阻塞DOM的构建(因为DOM解析遇到JS会停止解析，开始下载脚本并执行) ，CSSOM的构建阻塞JS执行")])]),v._v(" "),_("ul",[_("li",[v._v("压缩文件")]),v._v(" "),_("li",[v._v("按需加载")]),v._v(" "),_("li",[v._v("避免逐个操作DOM样式，尽可能预留好CSS样式，通过样式名的修改改变DOM样式，集中式操作减少reflow的次数")]),v._v(" "),_("li",[v._v("减少iframe数量")])]),v._v(" "),_("h2",{attrs:{id:"合成"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#合成"}},[v._v("#")]),v._v(" 合成")]),v._v(" "),_("ul",[_("li",[v._v("合成层的位图 交由GPU处理，比CPU块")]),v._v(" "),_("li",[v._v("repaint本身，不影响其它层")]),v._v(" "),_("li",[v._v("transform和opacity不触发重绘")])]),v._v(" "),_("h1",{attrs:{id:"代码问题"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#代码问题"}},[v._v("#")]),v._v(" 代码问题")]),v._v(" "),_("ul",[_("li",[v._v("频繁使用JSON.parse/JSON.stringify大对象")]),v._v(" "),_("li",[v._v("正则灾难性回溯")]),v._v(" "),_("li",[v._v("内存泄漏")]),v._v(" "),_("li",[v._v("服务端开启文件压缩功能")]),v._v(" "),_("li",[v._v("执行 JS 代码过长会卡顿，对需要很多时间计算的代码可用 "),_("code",[v._v("web worker")])])]),v._v(" "),_("h1",{attrs:{id:"网络相关"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#网络相关"}},[v._v("#")]),v._v(" 网络相关")]),v._v(" "),_("h3",{attrs:{id:"dns预解析"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#dns预解析"}},[v._v("#")]),v._v(" DNS预解析")]),v._v(" "),_("p",[v._v("预先获得域名所对应的 IP，href的值是预解析的域名")]),v._v(" "),_("div",{staticClass:"language-js line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-js"}},[_("code",[_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("<")]),v._v("link rel"),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),_("span",{pre:!0,attrs:{class:"token string"}},[v._v('"dns-prefetch"')]),v._v(" href"),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),_("span",{pre:!0,attrs:{class:"token string"}},[v._v('"//xxx.example.com"')]),v._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("/")]),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v(">")]),v._v("\n")])]),v._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[v._v("1")]),_("br")])]),_("blockquote",[_("p",[v._v("preload和prefetch")]),v._v(" "),_("p",[v._v("preload强制浏览器立即获取资源， 具有较高优先级")]),v._v(" "),_("p",[v._v("prefetch的资源获取时可选 和 较低 优先级的，是否获取取决于浏览器")])]),v._v(" "),_("h3",{attrs:{id:"缓存"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#缓存"}},[v._v("#")]),v._v(" 缓存")]),v._v(" "),_("p",[v._v("强缓存")]),v._v(" "),_("p",[v._v("协商缓存")]),v._v(" "),_("p",[v._v("选择合适缓存策略")]),v._v(" "),_("p",[v._v("对于大部分的场景都可以使用强缓存配合协商缓存解决")]),v._v(" "),_("ul",[_("li",[v._v("使用 "),_("code",[v._v("Cache-control: no-store")]),v._v(" ，表示该资源不需要缓存")]),v._v(" "),_("li",[v._v("使用 "),_("code",[v._v("Cache-Control: no-cache")]),v._v(" 并配合 "),_("code",[v._v("ETag")]),v._v(" ，表示该资源已被缓存，但是每次都会发送请求询问资源是否更新")]),v._v(" "),_("li",[v._v("使用 "),_("code",[v._v("Cache-Control: max-age=31536000")]),v._v(" 并配合策略缓存使用，对文件进行指纹处理，一旦文件名变动就会立刻下载新的文件")])]),v._v(" "),_("h3",{attrs:{id:"使用http2-0"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#使用http2-0"}},[v._v("#")]),v._v(" 使用HTTP2.0")]),v._v(" "),_("ul",[_("li",[v._v("解析速度快")]),v._v(" "),_("li",[v._v("头部压缩")]),v._v(" "),_("li",[v._v("多路复用")]),v._v(" "),_("li",[v._v("服务器推送")]),v._v(" "),_("li",[v._v("浏览器由并发请求限制")])]),v._v(" "),_("h3",{attrs:{id:"预加载-首屏优化不提"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#预加载-首屏优化不提"}},[v._v("#")]),v._v(" 预加载(首屏优化不提)")]),v._v(" "),_("ul",[_("li",[_("p",[v._v("有些资源不需要马上用到，但希望尽早获取")])]),v._v(" "),_("li",[_("p",[v._v("预加载强制请求资源，不会阻塞 "),_("code",[v._v("onload")]),v._v(" 事件")]),v._v(" "),_("div",{staticClass:"language-js line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-js"}},[_("code",[_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("<")]),v._v("link rel"),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),_("span",{pre:!0,attrs:{class:"token string"}},[v._v('"preload"')]),v._v(" href"),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),_("span",{pre:!0,attrs:{class:"token string"}},[v._v('"http://example.com"')]),v._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("/")]),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v(">")]),v._v("\n")])]),v._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[v._v("1")]),_("br")])])])]),v._v(" "),_("h3",{attrs:{id:"预渲染"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#预渲染"}},[v._v("#")]),v._v(" 预渲染")]),v._v(" "),_("p",[v._v("将下载的文件预先在后台渲染")]),v._v(" "),_("div",{staticClass:"language-js line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-js"}},[_("code",[_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("<")]),v._v("link rel"),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),_("span",{pre:!0,attrs:{class:"token string"}},[v._v('"prerender"')]),v._v(" href"),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),_("span",{pre:!0,attrs:{class:"token string"}},[v._v('"http://example.com"')]),v._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("/")]),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v(">")]),v._v("\n")])]),v._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[v._v("1")]),_("br")])]),_("blockquote",[_("p",[v._v("预渲染可以提高页面的加载速度，但是要确保该页面百分百会被用户，否则白白浪费资源")])]),v._v(" "),_("h3",{attrs:{id:"减少http请求"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#减少http请求"}},[v._v("#")]),v._v(" 减少HTTP请求")]),v._v(" "),_("h3",{attrs:{id:"ssr"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ssr"}},[v._v("#")]),v._v(" SSR")]),v._v(" "),_("p",[v._v("SSR （service side render），后端将HTML拼接好返回前端")]),v._v(" "),_("blockquote",[_("p",[v._v("优点")])]),v._v(" "),_("ul",[_("li",[v._v("前端耗时少")]),v._v(" "),_("li",[v._v("利于SEO，有完整HTML页面，爬虫更易获取信息")]),v._v(" "),_("li",[v._v("无需占用客户端资源")]),v._v(" "),_("li",[v._v("后端生成静态化文件")]),v._v(" "),_("li",[v._v("首屏加载更快")])]),v._v(" "),_("blockquote",[_("p",[v._v("缺点")])]),v._v(" "),_("ul",[_("li",[v._v("不利于前后端分离")]),v._v(" "),_("li",[v._v("占用服务器资源")])]),v._v(" "),_("p",[_("strong",[_("u",[_("em",[v._v("客户端渲染")])])])]),v._v(" "),_("blockquote",[_("p",[v._v("优点")])]),v._v(" "),_("ul",[_("li",[v._v("前后端分离")]),v._v(" "),_("li",[v._v("体验更好")])]),v._v(" "),_("blockquote",[_("p",[v._v("缺点")])]),v._v(" "),_("ul",[_("li",[v._v("前端响应较慢")]),v._v(" "),_("li",[v._v("不利于SEO")])]),v._v(" "),_("h3",{attrs:{id:"gzip压缩"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#gzip压缩"}},[v._v("#")]),v._v(" Gzip压缩")]),v._v(" "),_("h3",{attrs:{id:"避免重定向"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#避免重定向"}},[v._v("#")]),v._v(" 避免重定向")]),v._v(" "),_("h1",{attrs:{id:"渲染优化"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#渲染优化"}},[v._v("#")]),v._v(" 渲染优化")]),v._v(" "),_("h3",{attrs:{id:"懒执行"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#懒执行"}},[v._v("#")]),v._v(" 懒执行")]),v._v(" "),_("p",[v._v("将某些逻辑延迟到使用时再计算。该技术可以用于首屏优化，对于某些耗时逻辑并不需要在首屏就使用的，就可以使用懒执行。懒执行需要唤醒，一般可以通过定时器或者事件的调用来唤醒。")]),v._v(" "),_("h3",{attrs:{id:"懒加载"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#懒加载"}},[v._v("#")]),v._v(" 懒加载")]),v._v(" "),_("p",[v._v("将不关键的资源延后加载——尽量只加载用户正 浏览 或即将会 浏览的图片")]),v._v(" "),_("p",[v._v("只加载自定义区域（通常是可视区域，但也可以是即将进入可视区域）内需要加载的东西")]),v._v(" "),_("p",[v._v("对于图片来说，先设置图片标签的 "),_("code",[v._v("src")]),v._v(" 属性为一张占位图，真实的图片资源放入自定义属性data-src 中，当进入自定义区域时，就将自定义属性替换为 "),_("code",[v._v("src")]),v._v(" 属性，这样就会下载图片资源")]),v._v(" "),_("h3",{attrs:{id:"节流防抖"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#节流防抖"}},[v._v("#")]),v._v(" 节流防抖")]),v._v(" "),_("p",[v._v("防抖：单位时间内多次触发，只执行最后的那一次，原理：延迟执行，期间但凡有新的触发就重置定时器")]),v._v(" "),_("p",[v._v("节流：单位时间只触发一次，原理：上锁，只有满足一定间隔时间才能执行")]),v._v(" "),_("h1",{attrs:{id:"图片"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#图片"}},[v._v("#")]),v._v(" 图片")]),v._v(" "),_("p",[v._v("电商类项目，存在大量图片，banner 广告图、菜单导航栏、列表头图等")]),v._v(" "),_("p",[v._v("图片众多以及体积过大影响页面加载速度")]),v._v(" "),_("blockquote",[_("p",[v._v("为啥？")]),v._v(" "),_("p",[v._v("有些图片请求并发，Chrome最多支持并发请求数有限，其他请求被push进队列中等待或停滞，直到上轮请求完成后才被发出，一部分资源需要排队等待时间，过多的图片影响页面加载展示")])]),v._v(" "),_("h2",{attrs:{id:"合适图片格式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#合适图片格式"}},[v._v("#")]),v._v(" 合适图片格式")]),v._v(" "),_("ul",[_("li",[v._v("WebP 格式具有更好的图像数据压缩算法，更小的图片体积，拥有肉眼识别无差异的图像质量，缺点是兼容性并不好")]),v._v(" "),_("li",[v._v("小图使用 PNG，对于大部分图标，完全可以使用 SVG 代替")]),v._v(" "),_("li",[v._v("照片使用 JPEG")]),v._v(" "),_("li",[v._v("雪碧图( 将多个图标文件整合到一张图片中 )")])]),v._v(" "),_("blockquote",[_("p",[v._v("可能请求非常多的小图片，会受到浏览器并发 HTTP 请求数的限制")])]),v._v(" "),_("ul",[_("li",[v._v("图片压缩")]),v._v(" "),_("li",[v._v("不用图片，用CSS代替")]),v._v(" "),_("li",[v._v("对于移动端来说，屏幕宽度就那么点，完全没有必要去加载原图浪费带宽。一般图片都用 CDN 加载，可以计算出适配屏幕的宽度，然后去请求相应裁剪好的图片")])]),v._v(" "),_("h4",{attrs:{id:"jpeg-jpg"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#jpeg-jpg"}},[v._v("#")]),v._v(" "),_("strong",[v._v("JPEG/JPG")])]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("高质量 有损压缩，体积小，不支持透明")])]),v._v(" "),_("li",[v._v("应用于轮播图 大的背景图、banner")])]),v._v(" "),_("h4",{attrs:{id:"png"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#png"}},[v._v("#")]),v._v(" "),_("strong",[v._v("PNG")])]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("无损压缩，质量好，体积大，支持透明")])]),v._v(" "),_("li",[_("strong",[v._v("应用小的logo")])])]),v._v(" "),_("h4",{attrs:{id:"svg"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#svg"}},[v._v("#")]),v._v(" "),_("strong",[v._v("SVG")])]),v._v(" "),_("ul",[_("li",[v._v("体积小，不失真，兼容好")]),v._v(" "),_("li",[v._v("应用于图标")])]),v._v(" "),_("h4",{attrs:{id:"gif"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#gif"}},[v._v("#")]),v._v(" GIF")]),v._v(" "),_("ul",[_("li",[v._v("支持透明")])]),v._v(" "),_("h4",{attrs:{id:"webp"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#webp"}},[v._v("#")]),v._v(" Webp")]),v._v(" "),_("p",[v._v("有损压缩与无损压缩（可逆压缩）的图片文件格式")]),v._v(" "),_("p",[v._v("比PNG/JPEG格式小")]),v._v(" "),_("p",[v._v("支持透明度")]),v._v(" "),_("p",[v._v("体积和效果上都做的不错")]),v._v(" "),_("div",{staticClass:"language-js line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-js"}},[_("code",[_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("<")]),v._v("picture"),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v(">")]),v._v("\n    "),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("<")]),v._v("source type"),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),_("span",{pre:!0,attrs:{class:"token string"}},[v._v('"image/webp"')]),v._v(" srcset"),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),_("span",{pre:!0,attrs:{class:"token string"}},[v._v('"/static/img/perf.webp"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v(">")]),v._v("\n    "),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("<")]),v._v("source type"),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),_("span",{pre:!0,attrs:{class:"token string"}},[v._v('"image/jpeg"')]),v._v(" srcset"),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),_("span",{pre:!0,attrs:{class:"token string"}},[v._v('"/static/img/perf.jpg"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v(">")]),v._v("\n    "),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("<")]),v._v("img src"),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("=")]),_("span",{pre:!0,attrs:{class:"token string"}},[v._v('"/static/img/perf.jpg"')]),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v(">")]),v._v("\n"),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("<")]),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v("/")]),v._v("picture"),_("span",{pre:!0,attrs:{class:"token operator"}},[v._v(">")]),v._v("\n")])]),v._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[v._v("1")]),_("br"),_("span",{staticClass:"line-number"},[v._v("2")]),_("br"),_("span",{staticClass:"line-number"},[v._v("3")]),_("br"),_("span",{staticClass:"line-number"},[v._v("4")]),_("br"),_("span",{staticClass:"line-number"},[v._v("5")]),_("br")])]),_("h2",{attrs:{id:"webpack压缩"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#webpack压缩"}},[v._v("#")]),v._v(" webpack压缩")]),v._v(" "),_("p",[v._v("配置 image-webpack-loader")]),v._v(" "),_("h2",{attrs:{id:"雪碧图"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#雪碧图"}},[v._v("#")]),v._v(" 雪碧图")]),v._v(" "),_("p",[v._v("CSS Sprites ，精灵图，图像合成技术，主要用于小图片显示")]),v._v(" "),_("p",[v._v("同原域名请求有最大并发限制，Chrome为6个，如 页面有10个小图，需要10次请求，2次并发")]),v._v(" "),_("p",[v._v("若把10个图合成一个大图，只需1次请求")]),v._v(" "),_("ol",[_("li",[v._v("减少请求次数")]),v._v(" "),_("li",[v._v("减少服务器压力")]),v._v(" "),_("li",[v._v("减少并发")]),v._v(" "),_("li",[v._v("提高加载速度")]),v._v(" "),_("li",[v._v("减少鼠标滑过的一些bug")]),v._v(" "),_("li",[v._v("解决网页设计师在图片命名上的困扰")])]),v._v(" "),_("h2",{attrs:{id:"iconfont"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#iconfont"}},[v._v("#")]),v._v(" iconfont")]),v._v(" "),_("p",[v._v("通过字体方式展示图标，用户 图标渲染、简单图形、特殊字体等")]),v._v(" "),_("ul",[_("li",[v._v("轻量，已修改")]),v._v(" "),_("li",[v._v("减少请求次数")])]),v._v(" "),_("h2",{attrs:{id:"内联base-64"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#内联base-64"}},[v._v("#")]),v._v(" 内联Base 64")]),v._v(" "),_("p",[v._v("图片转为base64串，解析图片不会请求下载，而是解析字符串")]),v._v(" "),_("blockquote",[_("p",[v._v("缺点")]),v._v(" "),_("ol",[_("li",[v._v("比使用二进制体积增大 33%")]),v._v(" "),_("li",[v._v("全部内联后，原本可并行加载的图片会串行放入请求")])]),v._v(" "),_("p",[v._v("适用于 更新频率低、首屏或骨架图上的小图标")])]),v._v(" "),_("h2",{attrs:{id:"css代替图"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#css代替图"}},[v._v("#")]),v._v(" CSS代替图")]),v._v(" "),_("p",[v._v("实现修饰效果，半透明、阴影、圆角、渐变等")]),v._v(" "),_("h2",{attrs:{id:"cdn图片"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#cdn图片"}},[v._v("#")]),v._v(" CDN图片")]),v._v(" "),_("h2",{attrs:{id:"图片懒加载"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#图片懒加载"}},[v._v("#")]),v._v(" 图片懒加载")]),v._v(" "),_("p",[v._v("暂时不设置图片的src属性，先卸载data-src中，等图片到了可视区域再将真实src放进src属性")]),v._v(" "),_("p",[v._v("使用background-url，应用到具体元素时，才会下载图片")]),v._v(" "),_("h2",{attrs:{id:"图片预加载"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#图片预加载"}},[v._v("#")]),v._v(" 图片预加载")]),v._v(" "),_("p",[v._v("需要展示大量图，将图提前加载到本地缓存")]),v._v(" "),_("h2",{attrs:{id:"响应式图加载"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#响应式图加载"}},[v._v("#")]),v._v(" 响应式图加载")]),v._v(" "),_("p",[v._v("在不同分辨率的设备上显示不同尺寸的图")]),v._v(" "),_("h2",{attrs:{id:"渐进式图片"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#渐进式图片"}},[v._v("#")]),v._v(" 渐进式图片")]),v._v(" "),_("p",[v._v("和骨架屏 原理类似")]),v._v(" "),_("p",[v._v("在图完全加载完前先显示低画质版本，让用户产生图片加载变快的印象，而不是盯着一片空白")]),v._v(" "),_("h1",{attrs:{id:"cdn"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#cdn"}},[v._v("#")]),v._v(" CDN")]),v._v(" "),_("p",[v._v("内容分发网络")]),v._v(" "),_("p",[v._v("静态资源使用 CDN 加载，由于浏览器对于单个域名有并发请求上限，可以考虑使用多个 CDN 域名")]),v._v(" "),_("h1",{attrs:{id:"其他"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[v._v("#")]),v._v(" 其他")]),v._v(" "),_("h3",{attrs:{id:"webpack-优化"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#webpack-优化"}},[v._v("#")]),v._v(" Webpack 优化")]),v._v(" "),_("ul",[_("li",[v._v("对于 Webpack，打包项目使用 production 模式，会自动开启代码压缩")]),v._v(" "),_("li",[v._v("ES6 模块开启 tree shaking，移除没有使用的代码")]),v._v(" "),_("li",[v._v("优化图片，对于小图使用 base64 的方式写入文件")]),v._v(" "),_("li",[v._v("按照路由拆分代码，实现按需加载")]),v._v(" "),_("li",[v._v("给打包出来的文件名添加哈希，实现浏览器缓存文件")])]),v._v(" "),_("h3",{attrs:{id:"监控"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#监控"}},[v._v("#")]),v._v(" 监控")]),v._v(" "),_("p",[v._v("采集——>上传——>分析——>报警")]),v._v(" "),_("h1",{attrs:{id:"渲染几万条数据"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#渲染几万条数据"}},[v._v("#")]),v._v(" 渲染几万条数据?")]),v._v(" "),_("p",[_("code",[v._v("requestAnimationFrame")]),v._v(" 每 16 ms 刷新")]),v._v(" "),_("p",[v._v("分页+虚拟滚动、图片懒加载、图片的动态裁剪")]),v._v(" "),_("h1",{attrs:{id:"spa首屏优化"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#spa首屏优化"}},[v._v("#")]),v._v(" SPA首屏优化")]),v._v(" "),_("p",[v._v("浏览器从响应用户输入网址地址，到首屏内容渲染完成时间，整个网页不一定要完全渲染完成，但需要展示当前视窗内容")]),v._v(" "),_("h2",{attrs:{id:"加载慢的原因"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#加载慢的原因"}},[v._v("#")]),v._v(" 加载慢的原因")]),v._v(" "),_("ul",[_("li",[v._v("网络延时")]),v._v(" "),_("li",[v._v("资源文件体积过大")]),v._v(" "),_("li",[v._v("资源加载重复发送请求")]),v._v(" "),_("li",[v._v("加载脚本时，渲染内容阻塞")])]),v._v(" "),_("h2",{attrs:{id:"解决"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#解决"}},[v._v("#")]),v._v(" 解决")]),v._v(" "),_("ul",[_("li",[v._v("减少入口文件体积")]),v._v(" "),_("li",[v._v("静态资源本地缓存")]),v._v(" "),_("li",[v._v("UI框架按需加载")]),v._v(" "),_("li",[v._v("图片资源压缩")]),v._v(" "),_("li",[v._v("组件重复打包")]),v._v(" "),_("li",[v._v("GZip压缩")]),v._v(" "),_("li",[v._v("使用SSR")]),v._v(" "),_("li",[v._v("JS外联文件放在HTML文档底部，CSS外联文件放在HTML文档头部")]),v._v(" "),_("li",[v._v("减少cookie体积")]),v._v(" "),_("li",[v._v("骨架屏")]),v._v(" "),_("li",[v._v("h5方式一次性渲染")])]),v._v(" "),_("h3",{attrs:{id:"减少入口文件体积"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#减少入口文件体积"}},[v._v("#")]),v._v(" 减少入口文件体积")]),v._v(" "),_("p",[v._v("路由懒加载，将不同路由对应组件分割成不同代码块，待路由被请求时单独打包路由，使得入口文件变小")]),v._v(" "),_("blockquote",[_("p",[v._v("以函数形式动态加载路由，可以把各自的路由文件分别打包，只在解析给定路由时，才会加载路由组件")])]),v._v(" "),_("h3",{attrs:{id:"组件重复打包"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#组件重复打包"}},[v._v("#")]),v._v(" 组件重复打包")]),v._v(" "),_("p",[v._v("若A.js是一个常用库，多个路由使用它会造成重复下载")]),v._v(" "),_("p",[v._v("在webpack的config中，修改CommonChunkPlugin的配置")]),v._v(" "),_("p",[v._v("minChunks为3表示会把使用3次及以上的包抽离，放进公共依赖文件")]),v._v(" "),_("h3",{attrs:{id:"ssr-2"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ssr-2"}},[v._v("#")]),v._v(" SSR")]),v._v(" "),_("p",[v._v("服务端渲染，Server Side ，组件或页面通过服务器生成html字符串，发送到浏览器")]),v._v(" "),_("ol",[_("li",[v._v("二次启动时先利用缓存渲染，后台进行异步数据更新")]),v._v(" "),_("li",[v._v("减少不必要的请求 和数据获取")]),v._v(" "),_("li",[v._v("提前请求或减少http请求")]),v._v(" "),_("li",[v._v("优化图片文件尺寸，压缩图片格式，压缩代码")]),v._v(" "),_("li",[v._v("启用gzip 压缩功能")]),v._v(" "),_("li",[v._v("使用CDN")]),v._v(" "),_("li",[_("strong",[v._v("网址后面加上“/”")]),v._v(":对服务器而言，不加斜杠服务器会多一次判断的过程，加斜杠就会直接返回网站设置的存放在网站根目录下的默认页面。")]),v._v(" "),_("li",[v._v("Ajax采用缓存调用")])]),v._v(" "),_("h1",{attrs:{id:"网页卡顿"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#网页卡顿"}},[v._v("#")]),v._v(" 网页卡顿？")]),v._v(" "),_("ol",[_("li",[v._v("网络请求是否过多，导致数据传输变慢，可通过缓存优化")]),v._v(" "),_("li",[v._v("资源bundle太大，考虑拆分")]),v._v(" "),_("li",[v._v("代码是否有太多循环在主线程上花费太长时间")]),v._v(" "),_("li",[v._v("浏览器某个帧 中 渲染太多东西")]),v._v(" "),_("li",[v._v("页面渲染时，大量回流和重绘")]),v._v(" "),_("li",[v._v("内存泄露")])]),v._v(" "),_("h1",{attrs:{id:"动画优化"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#动画优化"}},[v._v("#")]),v._v(" 动画优化")]),v._v(" "),_("ul",[_("li",[v._v("合理布局")]),v._v(" "),_("li",[v._v("transform代替left、top 减少重排")]),v._v(" "),_("li",[v._v("硬件加速")]),v._v(" "),_("li",[v._v("避免不必要的图形层")]),v._v(" "),_("li",[v._v("requestAnimationFrame实现动画")])]),v._v(" "),_("p",[v._v("动画每一帧都是re-render，显示器刷新频率 60 HZ，意味着每一帧任务耗时不超过 16ms")]),v._v(" "),_("h1",{attrs:{id:"react官网优化"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#react官网优化"}},[v._v("#")]),v._v(" React官网优化")]),v._v(" "),_("p",[_("a",{attrs:{href:"https://mp.weixin.qq.com/s/8j1-ZT_dfzHf9NA4KNuaNQ",target:"_blank",rel:"noopener noreferrer"}},[v._v("React 渲染的未来"),_("OutboundLink")],1)]),v._v(" "),_("h2",{attrs:{id:"补充"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#补充"}},[v._v("#")]),v._v(" 补充")]),v._v(" "),_("p",[_("code",[v._v("react")]),v._v("官网不完全由"),_("code",[v._v("react")]),v._v("开发，得益于"),_("code",[v._v("Gatsby")]),v._v("库")]),v._v(" "),_("blockquote",[_("p",[_("code",[v._v("Gatsby")]),v._v(" 性能很好，开发很自由，基于 "),_("code",[v._v("React")]),v._v(" 和 "),_("code",[v._v("GraphQL")]),v._v(" 构建网站的库。用于构建静态网站，如博客、企业官网、静态内容相对比较多的网站")])]),v._v(" "),_("p",[v._v("监听link如何实现？")]),v._v(" "),_("p",[v._v("result：使用 Intersection Observer，兼容问题")])])}),[],!1,null,null,null);_.default=s.exports}}]);